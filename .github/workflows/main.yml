```yaml
name: Build SuccessionRestore

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
  workflow_dispatch:

jobs:
  build-deb:
    runs-on: macos-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        with:
          ref: ${{ github.event.pull_request.head.sha || github.sha }}

      - name: Set Xcode Version
        run: sudo xcode-select -s /Applications/Xcode_16.4.app

      - name: Install dpkg
        run: brew install dpkg

      - name: Update iOS Deployment Target
        run: |
          sed -i '' 's/IPHONEOS_DEPLOYMENT_TARGET = 26.0;/IPHONEOS_DEPLOYMENT_TARGET = 18.0;/g' \
            SuccessionRestore/SuccessionRestore.xcodeproj/project.pbxproj

      - name: Build App
        run: |
          xcodebuild -project SuccessionRestore.xcodeproj \
            -scheme SuccessionRestore \
            -sdk iphoneos \
            -configuration Release \
            build \
            CODE_SIGN_IDENTITY="" \
            CODE_SIGNING_REQUIRED=NO \
            CODE_SIGNING_ALLOWED=NO

      - name: Package App into .deb
        run: |
          APP_BUNDLE=$(find /Users/runner/Library/Developer/Xcode/DerivedData/SuccessionRestore-*/Build/Products/Release-iphoneos -name "SuccessionRestore.app" -type d)
          if [ -z "$APP_BUNDLE" ]; then
            echo "‚ùå App bundle not found"
            exit 1
          fi
          echo "Found app bundle at: $APP_BUNDLE"
          mkdir -p deb_package/Applications
          cp -r "$APP_BUNDLE" deb_package/Applications/
          mkdir -p deb_package/DEBIAN
          cat << EOF > deb_package/DEBIAN/control
Package: com.youridentifier.successionrestore
Name: SuccessionRestore
Version: 1.0.0
Architecture: iphoneos-arm
Description: An iOS app for system restoration
Maintainer: Your Name <your.email@example.com>
Author: Your Name
Section: Utilities
Depends: firmware (>= 14.0)
EOF
          dpkg-deb -b deb_package SuccessionRestore.deb
          mkdir -p build
          mv SuccessionRestore.deb build/

      - name: Upload Artifacts
        uses: actions/upload-artifact@v4
        with:
          name: successionrestore-deb
          path: build/SuccessionRestore.deb

      - name: Release to GitHub
        if: github.event_name == 'push' && github.ref == 'refs/heads/main'
        uses: softprops/action-gh-release@v2
        with:
          files: build/SuccessionRestore.deb
          tag_name: v${{ github.run_number }}
          name: SuccessionRestore v${{ github.run_number }}
          draft: false
          prerelease: false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```
